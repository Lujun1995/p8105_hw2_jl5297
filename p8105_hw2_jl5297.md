p8105\_hw2\_jl5297
================
Jun Lu
9/25/2018

Executive Summary
-----------------

This my second homework for Data Science, including my solutions to Problems 1, 2 and 3. And I was praciticing data wrangling and tidy data through this homework.

Load Packages
-------------

``` r
library(tidyverse)
```

Problem 1
---------

This problem focuses on NYC Transit data; in particular, this CSV file contains information related to each entrance and exit for each subway station in NYC.

### 1. Read and clean the data

Read and clean the NYC Transit data

``` r
nyc = 
    read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
    janitor::clean_names() %>% 
    select(line:entry, vending, ada) %>% 
    mutate(entry = ifelse(entry == "YES", T, F))

nyc
```

    ## # A tibble: 1,868 x 19
    ##    line     station_name station_latitude station_longitude route1 route2
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr> 
    ##  1 4 Avenue 25th St                  40.7             -74.0 R      <NA>  
    ##  2 4 Avenue 25th St                  40.7             -74.0 R      <NA>  
    ##  3 4 Avenue 36th St                  40.7             -74.0 N      R     
    ##  4 4 Avenue 36th St                  40.7             -74.0 N      R     
    ##  5 4 Avenue 36th St                  40.7             -74.0 N      R     
    ##  6 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ##  7 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ##  8 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ##  9 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ## 10 4 Avenue 53rd St                  40.6             -74.0 R      <NA>  
    ## # ... with 1,858 more rows, and 13 more variables: route3 <chr>,
    ## #   route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>, route8 <int>,
    ## #   route9 <int>, route10 <int>, route11 <int>, entrance_type <chr>,
    ## #   entry <lgl>, vending <chr>, ada <lgl>

The nyc\_transit dataset contains variables including line, station, name, station latitude / longitude, routes served(route number and route name), entry, vending, entrance type, and ADA compliance. I load the data, clean the varibales name, select needed variables and convert the entry variable from character (YES vs NO) to a logical variable. This data set have 1868 rows and 19 columns. These data is not tidy, because there are variables in columns' names. And I think it should add a column to tell which entrance it is because it is quite confusing now.

### 2. Solution to questions

**a. Count distinct stations**

``` r
nyc_unique = unique(nyc[c("line", "station_name", "ada")])
nrow(nyc_unique)
```

    ## [1] 465

There are 465 distinct stations.

**b. Count stations which are ADA compliant**

``` r
nyc_unique %>% filter(ada == T) %>% nrow()
```

    ## [1] 84

There are 84 stations which are ADA compliant.

**c. Calculate proportion of station entrances / exits without vending allow entrance**

``` r
entran_num = nrow(nyc)
nyc %>% filter(entry == T, vending == "NO") %>% nrow() / entran_num
```

    ## [1] 0.0369379

The proportion of station entrances / exits without vending allow entrance is about 0.037

### 3. Reformat data

Reformat data so that route number and route name are distinct variables. After reforming, I delete the line with NA in route name to make this data set more tidy.

``` r
nyc_reform = nyc %>% 
    gather(key = route_number, value = route_name, route1:route11) %>% 
    select(line, station_name, route_number, route_name, ada, everything()) %>%
    filter(!is.na(route_name)) %>%  
    arrange(line, station_name)

nyc_reform
```

    ## # A tibble: 4,270 x 10
    ##    line     station_name route_number route_name ada   station_latitude
    ##    <chr>    <chr>        <chr>        <chr>      <lgl>            <dbl>
    ##  1 4 Avenue 25th St      route1       R          FALSE             40.7
    ##  2 4 Avenue 25th St      route1       R          FALSE             40.7
    ##  3 4 Avenue 36th St      route1       N          FALSE             40.7
    ##  4 4 Avenue 36th St      route1       N          FALSE             40.7
    ##  5 4 Avenue 36th St      route1       N          FALSE             40.7
    ##  6 4 Avenue 36th St      route2       R          FALSE             40.7
    ##  7 4 Avenue 36th St      route2       R          FALSE             40.7
    ##  8 4 Avenue 36th St      route2       R          FALSE             40.7
    ##  9 4 Avenue 45th St      route1       R          FALSE             40.6
    ## 10 4 Avenue 45th St      route1       R          FALSE             40.6
    ## # ... with 4,260 more rows, and 4 more variables: station_longitude <dbl>,
    ## #   entrance_type <chr>, entry <lgl>, vending <chr>

### 4. Solutions to questions

**a. Count distinct stations which serve the A train**

``` r
nyc_reform_unique = unique(nyc_reform[c("line", "station_name",  "route_name", "ada")])
nyc_reform_unique %>% filter(route_name == "A") %>% nrow()
```

    ## [1] 60

There 60 distinct stations which serve the A train.

**b. Count how many distinct stations which serve the A train are ADA compliant**

``` r
nyc_reform_unique %>% filter(route_name == "A", ada == T) %>% nrow()
```

    ## [1] 17

There are 17 distinct stations which serve the A train and are ADA compliant.
